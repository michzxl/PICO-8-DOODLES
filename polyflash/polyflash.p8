pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
█=1000
d⧗=0.0333
⧗=0

rmax=45
n=3
pen=32/n
_c=cos(0.5/n)
rmin=rmax*_c

tv=.05
t=0

p={10}
for i=1,#p do
	if p[i]~='' then
		pal(i,p[i],1)
	end
end

--triangle wave, w/ period 1
function tri_wave(x)
	return abs((x+.5)%1-.5)
end

--n-gon
function shape(ang)
	a=rmax*cos(0.5/n)
	b=cos(tri_wave(n*ang-0.5-t/2)/n)
	return a/b
end

function stats()
	print(flr(100*stat(1)).."%★"
  .."\n"..aba
		,0,0,7)
end

function close(a,b,thresh)
 return abs(a-b)<thresh
end

-->8
cls()
::⌂::
n=3+sin(t/5)+1
rectfill(0,0,50,10,0)
rmax=45+sin(⧗/8)*15
⧗+=d⧗
t+=tv

if t%2<0.25 then
	pal(1,rnd(1)<.5 and rnd(15)+1 or 128+rnd(15)+1)
end

--aba=flr(█+2800*abs(tv))
aba=1050
for i=1,aba do
	ang,r=rnd(1),rnd(rmax+pen)
	x,y=cos(ang)*r,sin(ang)*r
	
	sr=shape(ang)
	if r<sr then
		a=16*(sin(⧗/20)+1.5)*2
		c=flr(y/a+x/100+t)+flr(x/a-t)
		c=c%2
		c=c+flr((x+sin(t/2)*5)/32)
		c=c%2
		
	elseif close(r,sr,2) then
		c=0
	else
		c=0
	end
	
	circ(x+64+sin(t/8)*8,y+64+cos(t/8)+8,1,c)
end

stats()

flip() goto ⌂
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
