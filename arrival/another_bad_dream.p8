pico-8 cartridge // http://www.pico-8.com
version 21
__lua__
--another bad dream
--by ???

function nsin(a)
	return sin(x)/2+0.5
end

function sqr(a) return a*a end

t=0
ti=0
fps=30
dt=1/30

cls()
::⌂::
ti+=1
t+=dt

for i=1,0 do
	x,y=rnd(128),rnd(128)
	circ(x,y,1,0)
end

for i=1,500 do
	x,y=rnd(128),rnd(128)
	p=pget(x-2*sgn(x-64),y)
	if p>0 and p~=7 then
		circ(x,y,1,p)
	elseif p==7 then
		circ(x,y,1,t%2+1)
	end
end

k=1/6
s={}
c={}
for i=0,6 do
	for a=0,1,k do
		a1=a+t/12
		a2=a1+k+t/8+i/8
		s[a1]=sin(a1)
		c[a1]=cos(a1)
		s[a2]=sin(a2)
		c[a2]=cos(a2)
	end
end
s[t/4]=sin(t/4)

for i=0,6 do
	cx=64
	cy=128/6*i
	cy=(cy-64)*(cos(t/16)/4+1/4+1)+64
	di=-abs(12*(i-3))+36-18
	ps={}
	for a=0,1,k do
		a1=a+t/12
		a2=a1+k+t/8+i/8
		sa1,ca1=s[a1],c[a1]
		sa2,ca2=s[a2],c[a2]
		if i%2==0 then
			d=32+di+c[a1]*16+s[t/4]*4
		else
			d=32+di+s[a1]*16+s[t/4]*4
		end
		
		add(ps,{
			cx+d*ca1,
			cy+d*sa1*(3/12+cos(t/16)/12),
			cx+d*ca2,
			cy+d*sa2*(1/6+cos(t/16)/12),
		})
		
	end
	for p in all(ps) do
		line(p[1],p[2]+1,p[3],p[4]+1,8)
	end
	for p in all(ps) do
		line(p[1],p[2],p[3],p[4],7)
		line(p[1],p[2]-1,p[3],p[4]-1,7)
	end
end



flip()goto ⌂

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
11111111111111111111111111122222222882881222888888888828222222822888288888888888888888281221111118881181811111111118888888888888
11111111111111112111111111222222122228818128188881888282222882222222822288888828828228822222211218188218111111111811888888888888
21111211111111111111111222112221221222181111811118111222282228222222282222888282222882282222121128828222821182218181888818818888
12222111221211111211122221211122122221211121111111111121122122222228828118221221122228222282212288282288288828222212888181181888
22212111112121111121122222111111222222122212211111111111111211821112181111182111111822828828822882828888882288222228288818818888
22121111111212111111211222111112122111111122222111111111111111111111111118811111111182222282222288288888288882888282888888282888
22111811111121221211111121111111111111111112222211111111111111111111111111111111111222222222822288888828822288888888888288828222
21118188111112212122221121111111111111111111221111111111111112112111111111111111122222222222222828888188882228881288888822822222
12111811211111121222222211111111111111111111111111111111111211221222111111111111112222222222212288818888882222111128888288282222
11111111111111111112222188111111111111112111111111111111122122122212211121211111111211222222222211181888882221111122822888828888
11111111111111111221222888818111111111111121111111111111122211211121112212111111111111112222211222118888828221121122222288888888
11111111111111182112212288888811122128882212211111211111222222222112111222211111121111211212111228282888182882222822822288888888
11111111811888888811121888888181117288282222222222221112127222222221121222211212221122122121118882888188188888228288282228888888
11111118188888888111111188888811111812822222222222222221222222222722212222122122111112222221888888881881888888828828822228888888
11111111111811888811111118182111118181212212222222827288227772222272222272722222281182222212888888818188818888888888218218881181
11111111111118888881112112221221222811122122122118188182877772222227777728222222288822282128218881111881188881188888888888181111
11111111111188888188121222222222222271272217211111111881777887221117777882882211882228828772122111118818111811118888888818811111
11111111111818811881182212222222222272777788211111111118778811212218888888811122122222882771221211118281211111118888888881881811
11111111111181111818888828822822222227777812122112188211881211122111111811212222211222722872122828828822811811118888188881818188
11111111111118111181888811888288822282888781211288882882212722222281211222222122118118288281888888881811111111111811811118181888
11111111111181881188288118818818881222828277177788828288227828222222222822221221721121777778888888888111111111111112111111888888
11112111211118882818882281281121222822282222777777777828888888882282288222288777272217777772888888882221211222222228281181888888
11221222221881821221228228822212222282222222777777777288888888888888888882278787722727777888282221822222122122122222111118888888
22122222228888822212282882221121228222288227777777888888888888888888888872728877727777788822212212222222222222212221211111221281
22222121211818282222228222222111211121888877778888212288888828888188888888272787277778821222221221221122122122222222121112222122
22222212111111822222212221111122122118218288882122122111181181111111118181888888821882212112211111111111121222222222222222221221
22222121111111212222121111111121221221121222221211211211111111111111111111182188118111121111111111111111112122222222222222222222
22222212111111122121111111112112222222211222222121121111111111111111111111111111811111112211111111111111111212222222222222222221
22211221111111121211111111212221222222111112222221111111111111111111111111111111111111112121111111111111111111221222222222222212
22121111111111112111111111122222112111211122222211111111111111111111111181111111111111111211111111111111111111112112222222222221
22212221111111111111111111221211221111121122122111111111111111111111118818111111111111111111211112111111111111111221222222222212
22222221211111111111111111111112111122212211211111121111111112872882888882811121121121211122122221221112111111111111111122222821
12221112112111111111111111111111122222221121111112212221712728288828282228282112777777777722222222222128222212111111112112288282
11111121121221111111111111121122222222212212212222222272228277877777777777777777777777777772272222228882822228221212222222221828
11111212212222211121111811282222122122122122222277777777777777777777777777777777888888888888828882288882222282222222222222118111
11111222122222222228288288828222212212222277777777777777777777777888888888888888888888818888777777777222228822222222122121111111
21212222222222222282282222222811822222222277777777888888888888888888888181181888881181181888777777772722277822222222211211111111
22222222222222222222822222281128222222777777777788888811111111111111111111111218111112118122888777777777727772221222221111111818
22222222222222222282282228888212227277777777888811111111111111111111111111111111111111111221222888887777777777772222211111181888
21282122222222222228288818888828177777778877711111111111111111111111111111111111111111111122222222228888877777777771111111118888
12888888282222222882821181182181877788888277777771111111111111111111111111111111111111112212221121222221188877777777778111111888
88888888888222882228212112211218288822822188777777711212271111111122211121211112111122222222221272222272777777888887772211118888
11888888888888828222221222211121222282281882888877777222727177727272227777777721222222222222272222227777777788272888882221181118
11128112888888882822222222221122822828888828228288877277777777777777777777777722222222222227277277777777788822888288812211811118
11222221228282828222222212222281188888888882882877777777777777777777778888888882222722222277777777777888828228888188188111118188
12222222222222222222222121122211111888288888888277777777888888888888888822222822227222222777777777888888882888881818888888811888
22122222222222222222222211211181111112818888888888888888111222121182222222222222272227777777777888888881181888888888888888188888
12222222282222222222221182118818111111111888888111881811111122212212222222827272772277777778888888888888118888888888811188812888
22222221222222222222211818881888888118881188181111222111111222222211121181287777778277778888818218218881888888888888888181221288
22222222212222222222121188888881888888888888112112222212112222222211112118118888881888881881181222121111188888888888888822822888
22222222121211221222221111888888888181881181111222222221211122222222222211111111118118112188112212211111888888888881888222211188
22222222211111112121111112118882881111111111112122122222111112222222222212111111111281221222111221111888188888818118111112111118
22222222111111111111111111222128111111111112122222222222211222222222222221111121122122212222211211111111888881811181111111188111
22222222211111111111122122222211211111112122222222222222222222222222222222222212222222222221222222111111111818111118118118888881
22222222121121111211222222222222121111111222222222222222222222222222222222222222221122222212122221111121111111111111811811888888
22228188212212222122122122222221211111112212222222222222222222222222222212122112212212221121222222211212211118111182111112188888
82881881822222222222218882222222121111111122227772722222222722222222222122222211121122122112182222122222221211221222211221228188
88818818118222222222218888222221212221112222277777272777777777227222227772727777777721272221222211211222222221222222222212111218
21111181882222122221121882222222222118122222778888882777777777777777777777777777777772722222222221112122222222277272722221121111
21111118111281212112112222222222221121122277788827777777777777777777777777777778888882872222222222221222272222777777872222222111
11111118118811212221222272222222277777777777777777777777777777788888877777777777777777777777222222222222222227788788887222222211
11881881888822222222272222822777777777777777777778888888888888888188288888888887777777777777777777727222222277828888828828222722
88888888888282777777777778788777777788887788888888881111811181111222221881111188888888888777777777777777777778222888888878888288
28828881888828777777777777777788888828777881111111111111111121122222222128111111111111118888888888877777777777777778888888888888
82282228888888888888777777777777777777778221111121211211112112212222221212211111111111181881181881888888778887777778288888888888
22222288888288888888888888888877777777777777777777222122222221222222222122222222212111118888818111118887788888888887777777777888
22222888882828888128811181888288888887887777777777777777777722222222222222222222221221111812811811111877827777777777777777777888
22228888822282221212282218278188888888888888888888777777777777777777772222222222222212121221277777777777777777777777777888888888
22222888822222222122222222721888888888828888888888888888888877777777777777722227277777777777777777777777777888888888888888888888
82228888822222222272222222272828888878282222888888828828228888888888887777777777777777777777777888777888888888888888888888888888
28888881112222228227222222222282282787822222282828272782777777777777777777777777777788888888888877778888828888888888888888888888
88288111111222112882227272772222227277277727277777777777777777777777777788888888888882822222727777888888881888888888888888888888
12811211111111111222282227777272722777777777777777777777777778888888888888888811112227222272277778288882812188888888888888888888
21111111111111112122222227777777777777777777777778888888888888888888171188888181122222727222227782822221221288888118888888888888
12111212211111111212282288888777777778888888888881111888888188188888881111282822222272272772277888222222122882881111888811888888
21212122222112111111228822881188888881112111121121111188811811811888888122228222222222822877288888282222288828211118188111188888
22222212822881818112822218181811118111111111222212221121112288888888887112882822228728888888828888828282111882118818888811888888
82222228288888888888281111818181211211111111222222282212128288888881821188288882888881888181288888888828111111188888888888888888
81282228882888888888881111111811122121111111122222228811112888888811118118888888888177777877882882888281111188818822288888888888
18818818128188881888888811812118128222221128222222222281111111218211211121818877777777777787727228222228228888888222228828822828
28181181111118181188888188888221282222222882222227722222121111122122117277777777777788888288872772272222222888888882288282222212
81811811111111818828888888812727227272227727222227772222227717777777777777777788888888282888888888727888222888888828222822222228
88888181111111182277777777777777777727272727222278777222772777777777777788888888888888888888888888828828888288888282222222222282
11888888181111222277777777777777777777777777777777777777777777777887777877772722788728888288888882822282882888282222822821222828
11188888818112822288888888888887777777777777777777777777777777777777777777777777777222877778888828222828888828822228288281222281
11188881181881222227282787727228888888887777777777777887777777777777777777777777777777777777777777777777778182212211811811282112
11118111118118222222222272777272777777777777777777777777777777777777777777777777777777777777777777777777777777777777778112128181
11181181181888222277777727777777777777778888888888888777777777777777777777777777777888888888888888888888877777777777778881288888
11818818818818822827727777777777788888882222722278288888888777777777777777777777777888888888288888888888888888888888888888888888
11181181181881881288282777788888822827222277222222727777777777777788888888888777788888882222228888888888888888888888888888881888
11118111818818288222228888828828827272282282822277777777777888788888288888888887772288888222288888888888888888888888288888888882
11182188188882822122888228288888888888828888288277778888888888888888888888888888877728882822811888818888888888888882188888888888
11828212882888211282888888888888888888888288888888888888288888888888828888888882887777288211181181181888888888888811818188888822
22882881128228128828888888888888888888888888888188888822828888888888288282282827288877728828818111118888888228888888188888888888
12288888812122882882218181882888888228888888881811188282228828828222822822272222788888788288881881188888822222888888888888888882
21888888821211288222221188128288888888188888888111118128122222272222222222722222788888888888888888888888282228288888888888888888
11118818112111121222228818822111188888811818888818111281222222222222222282288228288888888888888888888888828882888881888888888888
11181881811111112122282882211111188888888188888188882122222222228228822828888882888882888822288888888888888888888118118888888888
11188818188881811282288211111111118188888888888888888288822888882888888888888882888822288282222818818888888888881881881888888888
28888888888888188828818111111188111888888888888288288888888288888888888882282228288882822222221221181188188818188188818888888888
88888222888188188888881818188881818118818888882822822888222828288288882822222222288888282228222211111111881811118188188188882881
82882222221811881888888188888888881888281188888228222222222882822288222822222222228882888222221221111111118811881811881818888118
28228222288188118188888888888888888882822888888882882822228888888822222222222222288888888821222111111181188188888181118118811111
82882288821811111888888818888888888888228288888888888888288888888888222822282288888888888882112111811818888888888818111188881111
22222812211111111188818118888888888888882888888888882882888888888882882888777788888888828881881811881888888811881881881118118211
22228181111111212882882811818888888887777772777277772828288228222228888777777777777772282888888188888888888888818118818811811222
82888818811182128288888218118888888887777777777777727277727772222288777777888877778727227218888888888888888888888811888188118212
18888888888222222828888881888888888828887777777777772772227777777777777888887888828822222277888888888888888888888818888888881888
81888888882222222228888888888888888222777777777777777777777777777777777777777777777777777777888882882888888888888888888888888888
88888888882222222882888888888888882227777777777777777777777777777777777777777777777777777772888888228888888888888888888888888881
88888888888228288288228888888888822227777777777777777777777777778888877788888888888888888888288888282288288888888888888888888881
88888888888882888888828888888888188188888888888888888877777777777778888888888888888888888888822882722222828888888888888888818881
88888888888888888888888888888881881888888888818228277777788888877777777728282888888888888888282288222221282888888881181881181888
88888888888888888888888888882888128888818811121177777788888888888887777777777228828888888888828888888211228188888888818118812288
88888888888888888888888821128222282282221127777777788888888888888888888877777777782888888188888888888818111818818888882282222228
88888888888888281888888282212222222222227777777788888888888888888888888888888777777788811818888888888881188181188828822222222288
81888888888182828828882828181122222222227777788888888888888888811888888888888888877788888118888888888888888888882882222222222828
18111888881811281222228881811112122222288888888888881888888888118818212228888888888888881181888888888888888888888222202822222288
81111188888181112222222888118118218828888888888888812118818888881281722222888888888818811818888888888888888888888888888282222888
18111181118811111221222828888888888888118888888888821121111881172122222228888888888881888188888888888888888888888888888822220888
11111111111111112122188288288888888181118881888822222212111112111221222282888888888888888888888888888888888888888888882822222888
11111111112111111211228821888188881811111811118222221181112181281112118828888888888888888888888888888888888888888888888882822288
11111111121221112212182212112118811111111111888828818818828888818811121888888888888888888888888888888888888888888888888888222228
11111111112222222222112221211111121111111118888888881888888888888888818888888888888888888888888881888188888888888888888888882222
11181118888221221211212222122112222121821811888888888888888888888888888888888288282888888888888118111818888888888888888888888288
22888888888812112111112211228888822228288188888888888888888888888888888888882822888288888888888811111181118888888888888888888888
28888888881111181181111121811888182188888888888888888888888888888888888888882222288888888888188118118111111888888888888888888888
82882888811111818811111212181111811888888888888888888888888888888888888888288222888888888888881181111181118888888888888088880880

